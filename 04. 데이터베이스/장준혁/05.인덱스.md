## 5. 인덱스

### 인덱스의 필요성

데이터를 빠르게 찾을 수 있는 하나의 장치이다.

### B-Tree

인덱스는 보통 B-Tree 구조로 이루어져 있는데 루트 노드, 리프 노트, 그리고 루트 노드와 리프 노드 사이에 있는 브랜치 노드로 나뉜다.
인덱스가 효율적인 이유는 효율적인 단계를 거쳐 모든 요소에 접근할 수 있는 균형 잡힌 트리 구조와 트리 깊이의 대수 확장성 떄문이다.

### 인덱스 만드는 방법

MySQL의 경우 클러스터형 인덱스와 세컨더리 인덱스가 있으며 클러스터형 인덱스는 테이블 당 하나를 생성할 수 있다. 하나의 인덱스만 생성할 것이라면 클러스터형 인덱스를 만드는 것이 세컨더리 인덱스를 만드는 것보다 성능이 좋다.
세컨더리 인덱스는 보조 인덱스로 여러 개의 필드 값을 기반으로 쿼리를 많이 보낼 때 생성해야 하는 인덱스이다.

MongoDB의 경우 도큐먼트를 만들면 자동으로 ObjectID가 형성되며 해당 키가 기본키로 설정된다. 세컨더리 키도 부가적으로 설정이 가능하다.

### 인덱스 최적화 기법

1. 인덱스는 비용이므로 쿼리에 있는 필드에 인덱스를 무작정 다 설정하는 것은 답이 아니고 컬렉션에서 가져와야 하는 양이 많을수록 인덱스를 사용하는 것은 비효율적이다.
2. 인덱스 최적화 기법은 서비스 특징에 따라 달라지기 때문에 테스팅 하는 것이 중요하다.
3. 복합 인덱스를 생성할 때는 순서가 있고 생성 순서에 따라 인덱스 성능이 달라진다. 같음, 정렬, 다중 값, 카디널리티 순으로 생성해야한다.
